<!DOCTYPE html>

<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('modify-materials', {
        init: function () {
          // Wait for model to load.
          this.el.addEventListener('model-loaded', () => {
            // Grab the mesh / scene.
            const obj = this.el.getObject3D('mesh');
            // Go over the submeshes and modify materials we want.
            obj.traverse(node => {
              console.log('Node', node.name, node);
              if(node.name.includes('Mesh_Mesh_head_geo001_lambert2SG001')) {
                console.log('Node found!');
              }
            });
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene debug>
      <a-assets>
        <img id="wood-1" src="images/textures/wood-1-256.jpg">
        <img id="test" src="images/textures/checkerboard-256.png">
        <!-- <a-asset-item id="cube" src="models/cube.glb"></a-asset-item> -->

        <a-asset-item id="chestofdrawers-obj" src="models/chestofdrawers.obj"></a-asset-item>
        <a-asset-item id="chestofdrawers-drawer-obj" src="models/chestofdrawers-drawer.obj"></a-asset-item>
      </a-assets>
      <a-entity look-controls="reverseMouseDrag:true; reverseTouchDrag:true;" position="0 1.5 0">
        <a-entity obj-model="obj: #chestofdrawers-obj;" scale="0.01 0.01 0.01" rotation="90 -90 0" position="0.71 0.35 0.25"  material="src: #wood-1; repeat: 0.1 0.5"></a-entity>
        <a-entity obj-model="obj: #chestofdrawers-drawer-obj;" scale="0.01 0.01 0.01" rotation="-90 0 0" position="0 0 0" material="src: #wood-1;"></a-entity>
        <a-entity obj-model="obj: #chestofdrawers-drawer-obj;" scale="0.01 0.01 0.01" rotation="-90 0 0" position="0 -0.24 0" material="src: #wood-1;"></a-entity>
        <a-entity obj-model="obj: #chestofdrawers-drawer-obj;" scale="0.01 0.01 0.01" rotation="-90 0 0" position="0 -0.48 0" material="src: #wood-1;"></a-entity>
        <a-entity obj-model="obj: #chestofdrawers-drawer-obj;" scale="0.01 0.01 0.01" rotation="-90 0 0" position="0 -0.72 0" material="src: #wood-1;"></a-entity>
      </a-entity>
      <a-plane position="0 0 0" rotation="-90 0 0" width="2" height="2" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>

      <a-entity position="0 0 2">
        <a-camera user-height="0" look-controls="enabled:false;" active="true"></a-camera>
      </a-entity>
    </a-scene>
  </body>
</html>